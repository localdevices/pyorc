

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Frames &#8212; pyorc 0.8.8 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.5ea377869091fd0449014c60fc090103.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/theme-localdevices.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user-guide/frames/index';</script>
    <link rel="shortcut icon" href="../../_static/orc_favicon.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Velocimetry" href="../velocimetry/index.html" />
    <link rel="prev" title="Cross Sections and water level detection" href="../cross_section/index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/orc_logo_color.svg" class="logo__image only-light" alt=""/>
    <script>document.write(`<img src="../../_static/orc_logo_color.svg" class="logo__image only-dark" alt=""/>`);</script>
  
  
    <p class="title logo__title">pyOpenRiverCam 0.8.8</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../intro.html">
    Introduction
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../installation.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../quickstart.html">
    Quick start for programmers
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api.html">
    API reference
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://localdevices.org" title="Local Devices" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/logo.svg" class="icon-link-image" alt="Local Devices"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../intro.html">
    Introduction
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../installation.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../quickstart.html">
    Quick start for programmers
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api.html">
    API reference
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://localdevices.org" title="Local Devices" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/logo.svg" class="icon-link-image" alt="Local Devices"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Table of Content</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command-line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">Application Programming Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../camera_config/index.html">Camera configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../video/index.html">Videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cross_section/index.html">Cross sections and water level detection</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="../velocimetry/index.html">Velocimetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../transect/index.html">Transects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plot/index.html">Plotting</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Frames</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="frames">
<span id="frames-ug"></span><h1>Frames<a class="headerlink" href="#frames" title="Permalink to this heading">#</a></h1>
<p>The frames of a video can be enhanced before projection to highlight particles and patterns more clearly.
For instance, intensities can be thresholded, edges can be brought forward, and background transparency can be reduced.
The enhancements are automatically applied on all frames from the video or from the user defined frames between start and
end frame. After each enhancement, a new operation can be performed on the result, and even several enhancements can be
repeated. For instance, you may first apply an intensity thresholding to remove intensities above or below a certain
threshold (e.g. solar flare), then apply an edge detection, and then again threshold the result of the edge detection
enhancement.</p>
<p>The methods to perform these image enhancements are described below.</p>
<section id="intensity-thresholding">
<h2>Intensity thresholding<a class="headerlink" href="#intensity-thresholding" title="Permalink to this heading">#</a></h2>
<p>To remove effects of noisy dark pixels, or very bright pixels, such as directly reflected sunlight, a simple thresholding
method can be applied.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-0">
Command-line</label><div class="sd-tab-content docutils">
<p>the <code class="docutils literal notranslate"><span class="pre">minmax</span></code> flag performs thresholding on the frames. Simply set a minimum and maximum value under <code class="docutils literal notranslate"><span class="pre">min</span></code>
and <code class="docutils literal notranslate"><span class="pre">max</span></code> to darken pixels that are below or above the set thresholds. An example is provided below.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">frames</span><span class="p">:</span>
<span class="w">    </span><span class="nt">minmax</span><span class="p">:</span>
<span class="w">        </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150</span>
<span class="w">        </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">250</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-1">
API</label><div class="sd-tab-content docutils">
<p>Thresholding is performed with the <code class="docutils literal notranslate"><span class="pre">minmax</span></code> method, described in the <a class="reference internal" href="../../api.html#frames"><span class="std std-ref">frames API section</span></a>:</p>
</div>
</div>
</section>
<section id="improving-contrast">
<span id="contrast"></span><h2>Improving contrast<a class="headerlink" href="#improving-contrast" title="Permalink to this heading">#</a></h2>
<p>There are a number of ways to improve contrast of moving features. These so far include the following methods:</p>
<ul class="simple">
<li><p>Normalization: removes the average of a number of frames in time. This then yields a better contrast of moving things
compared to static things. This is particularly useful to remove visuals of the bottom, when you have very transparent
water. You can set the amount of frames used for averaging.</p></li>
<li><p>Smoothing: perform a gaussian kernel average over each frame. This removes very small moise features that may be seen
as moving patterns. It is important to keep the smoothing kernel smaller in size than the typical size of a moving
feature.</p></li>
<li><p>Differencing over time: this method is extremely effective for distinguishing moving things on the water. It simply
subtracts frame 1 from frame 2, frame 2 from frame 3 etcetera. Things that are very much the same between subsequent
frames will disappear. This method only works well when your video is very stable, e.g. taken with a fixed rig.
In fact, we have seen deteriorating results when applying this filter on highly unstable videos. It is highly
recommended to apply this method in combination with smoothing when you have a fixed rig setup or are able to keep
your camera very stable, for instance with a tripod.</p></li>
<li><p>Edge detection: enhances the visibility of strong spatial gradients in the frame, by applying two kernel filters on
the individual frames with varying window sizes, and returning the difference between the filtered images.</p></li>
</ul>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-2">
Command-line</label><div class="sd-tab-content docutils">
<p>The <code class="docutils literal notranslate"><span class="pre">normalize</span></code> flag can be used to remove background. By default, 15 frames at equal intervals are extracted
and averaged to establish an estimate of the background intensities. This is then subtracted from each frame to
establish a background corrected series. The amount of frames can be controlled with the <code class="docutils literal notranslate"><span class="pre">samples</span></code> flag. An
example, where the default amount of samples is modified to 25 is provided below.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">frames</span><span class="p">:</span>
<span class="w">    </span><span class="nt">normalize</span><span class="p">:</span>
<span class="w">        </span><span class="nt">samples</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-3">
API</label><div class="sd-tab-content docutils">
<p>Normalization is controlled by the <code class="docutils literal notranslate"><span class="pre">normalize</span></code> method and described in the <a class="reference internal" href="../../api.html#frames"><span class="std std-ref">frames API section</span></a>.</p>
</div>
</div>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-4" name="sd-tab-set-2" type="radio">
<label class="sd-tab-label" for="sd-tab-item-4">
Command-line</label><div class="sd-tab-content docutils">
<p>The <code class="docutils literal notranslate"><span class="pre">time_diff</span></code> method computes the difference between subsequent frames. It is highly recommended to do
some smoothing before this step to ensure that very small edges are smudged out. It is possible to take the
absolute value after smoothing (add <code class="docutils literal notranslate"><span class="pre">abs:</span> <span class="pre">True</span></code>) or apply a threshold on pixels that have a very low absolute
difference in intensity. We have best experience with the default threshold of 2 and no absolute value applied.
This can be changed as shown below. Simply leave out the line <code class="docutils literal notranslate"><span class="pre">thres:</span> <span class="pre">5</span></code> to use defaults:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">frames</span><span class="p">:</span>
<span class="w">    </span><span class="nt">time_diff</span><span class="p">:</span>
<span class="w">        </span><span class="nt">thres</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-2" type="radio">
<label class="sd-tab-label" for="sd-tab-item-5">
API</label><div class="sd-tab-content docutils">
<p>Time differencing is performed with the <code class="docutils literal notranslate"><span class="pre">time_diff</span></code> method, described in the <a class="reference internal" href="../../api.html#frames"><span class="std std-ref">frames API section</span></a>.</p>
</div>
</div>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-6" name="sd-tab-set-3" type="radio">
<label class="sd-tab-label" for="sd-tab-item-6">
Command-line</label><div class="sd-tab-content docutils">
<p>The <code class="docutils literal notranslate"><span class="pre">smooth</span></code> method smooths each frame a small or large (user-defined) amount. The amount can be controlled
with the <code class="docutils literal notranslate"><span class="pre">wdw</span></code> optional keyword. The default value is 1, which means the smallest kernel possible (3x3) is
used. When you set it to 2, 3, 4, etc. the kernel size will go to 5x5, 7x7, 9x9, and so on. This filter
is very efficient when performed <em>before</em> the <code class="docutils literal notranslate"><span class="pre">time_diff</span></code> filter when you have very stable videos, for
instance from a fixed rig setup.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">frames</span><span class="p">:</span>
<span class="w">    </span><span class="nt">smooth</span><span class="p">:</span>
<span class="w">        </span><span class="nt">wdw</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-7" name="sd-tab-set-3" type="radio">
<label class="sd-tab-label" for="sd-tab-item-7">
API</label><div class="sd-tab-content docutils">
<p>Smoothing is performed with the <code class="docutils literal notranslate"><span class="pre">smooth</span></code> method, described in the <a class="reference internal" href="../../api.html#frames"><span class="std std-ref">frames API section</span></a>.</p>
</div>
</div>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-8" name="sd-tab-set-4" type="radio">
<label class="sd-tab-label" for="sd-tab-item-8">
Command-line</label><div class="sd-tab-content docutils">
<p>The <code class="docutils literal notranslate"><span class="pre">edge_detect</span></code> method computes the difference between kernel smoothed frames.
By default, the kernel window one-sided sizes are 1 (i.e. a 3x3 window) and 2 (a 5x5 window) respectively.
For very high resolution imagery or very large features to track, these may be enlarged to better encompass the
edges of the patterns of interest. The kernel sizes can be modified using the flags <code class="docutils literal notranslate"><span class="pre">wdw_1</span></code> and <code class="docutils literal notranslate"><span class="pre">wdw_2</span></code> for
instance as follows:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">frames</span><span class="p">:</span>
<span class="w">    </span><span class="nt">edge_detect</span><span class="p">:</span>
<span class="w">        </span><span class="nt">wdw_1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">wdw_4</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-9" name="sd-tab-set-4" type="radio">
<label class="sd-tab-label" for="sd-tab-item-9">
API</label><div class="sd-tab-content docutils">
<p>Edge detection is performed with the <code class="docutils literal notranslate"><span class="pre">edge_detect</span></code> method, described in the <a class="reference internal" href="../../api.html#frames"><span class="std std-ref">frames API section</span></a>.</p>
</div>
</div>
</section>
<section id="orthoprojection">
<h2>Orthoprojection<a class="headerlink" href="#orthoprojection" title="Permalink to this heading">#</a></h2>
<p>As you supply a camera configuration to the video, <em>pyorc</em> is aware how frames must be reprojected to provide an
orthorectified image. Typically orthorectification is the last step before estimating surface velocities from the
frame pairs. Currently we have two approaches for orthoprojection. The first method <code class="docutils literal notranslate"><span class="pre">method=&quot;cv&quot;</span></code> uses solely OpenCV
functionality. Our new method <code class="docutils literal notranslate"><span class="pre">method=&quot;numpy&quot;</span></code> relies on numpy and xarray functionalities and is likely to provide
much more stable results in cases where the camera lens has a strong distortion and/or a part of the area of interest
lies outside of the field of view. In these cases we strongly recommend using <code class="docutils literal notranslate"><span class="pre">method=&quot;numpy&quot;</span></code>.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-10" name="sd-tab-set-5" type="radio">
<label class="sd-tab-label" for="sd-tab-item-10">
Command-line</label><div class="sd-tab-content docutils">
<p>In the command-line interface, orthoprojection is performed automatically after all image enhancement steps
the a user may possible have entered in the recipe. Nonetheless, you can still control the resolution (in meters)
of the projected end result at this stage. If you leave any specifics about the projection out of your recipe,
then <em>pyorc</em> will assume that you want to use the resolution specified in the camera configuration file. If
however you wish to manipulate the resolution in the recipe then you can do this by using the following
keys and values (with an example for 0.1 meter resolution). We here also show how to change the resampling
method to numpy (instead of the default cv):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">frames</span><span class="p">:</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">project</span><span class="p p-Indicator">:</span>
<span class="w">        </span><span class="nt">resolution</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">        </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">numpy</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-11" name="sd-tab-set-5" type="radio">
<label class="sd-tab-label" for="sd-tab-item-11">
API</label><div class="sd-tab-content docutils">
<p>Projection is performed with the <code class="docutils literal notranslate"><span class="pre">project</span></code> method, described in the <a class="reference internal" href="../../api.html#frames"><span class="std std-ref">frames API section</span></a>.</p>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>we will likely change our default projection method to numpy in a future release of <em>pyorc</em>.</p>
</div>
</section>
<section id="exporting-results-to-video">
<h2>Exporting results to video<a class="headerlink" href="#exporting-results-to-video" title="Permalink to this heading">#</a></h2>
<p>If you wish to inspect frames after they have been treated with filters and projected, then you can write the result to
a new video file. This helps to assess if patterns are indeed clearly visible and projected results good enough in
resolution to recognize the features on the water surface.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-12" name="sd-tab-set-6" type="radio">
<label class="sd-tab-label" for="sd-tab-item-12">
Command-line</label><div class="sd-tab-content docutils">
<p>In the recipe, the export to a video can be controlled with the <code class="docutils literal notranslate"><span class="pre">to_video</span></code> method and by supplying a
filename with extension .mp4 or another recognizable video extension. An example of a frames section in which
enhanced frames (with normalization, edge detection and finally thresholding and projecting) are written to a
file is given below.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">frames</span><span class="p">:</span>
<span class="w">    </span><span class="nt">normalize</span><span class="p">:</span>
<span class="w">        </span><span class="nt">samples</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25</span>
<span class="w">    </span><span class="nt">edge_detect</span><span class="p">:</span>
<span class="w">        </span><span class="nt">wdw_1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">wdw_4</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">    </span><span class="nt">minmax</span><span class="p">:</span>
<span class="w">        </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">        </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-13" name="sd-tab-set-6" type="radio">
<label class="sd-tab-label" for="sd-tab-item-13">
API</label><div class="sd-tab-content docutils">
<p>Exporting frames to a video is performed with the <code class="docutils literal notranslate"><span class="pre">to_video</span></code> method, described in the
<a class="reference internal" href="../../api.html#frames"><span class="std std-ref">frames API section</span></a>.</p>
</div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../cross_section/index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Cross Sections and water level detection</p>
      </div>
    </a>
    <a class="right-next"
       href="../velocimetry/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Velocimetry</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#intensity-thresholding">Intensity thresholding</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#improving-contrast">Improving contrast</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#orthoprojection">Orthoprojection</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exporting-results-to-video">Exporting results to video</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../_sources/user-guide/frames/index.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Rainbow Sensing.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>