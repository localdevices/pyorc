

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Frames &#8212; pyorc 0.9.3 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.5ea377869091fd0449014c60fc090103.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/theme-localdevices.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user-guide/frames/frames';</script>
    <link rel="shortcut icon" href="../../_static/orc_favicon.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/orc_logo_color.svg" class="logo__image only-light" alt=""/>
    <script>document.write(`<img src="../../_static/orc_logo_color.svg" class="logo__image only-dark" alt=""/>`);</script>
  
  
    <p class="title logo__title">pyOpenRiverCam 0.9.3</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../intro.html">
    Introduction
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../installation.html">
    Installation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../quickstart.html">
    Quick start for programmers
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api.html">
    API reference
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://localdevices.org" title="Local Devices" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/logo.svg" class="icon-link-image" alt="Local Devices"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../intro.html">
    Introduction
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../installation.html">
    Installation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../quickstart.html">
    Quick start for programmers
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api.html">
    API reference
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://localdevices.org" title="Local Devices" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/logo.svg" class="icon-link-image" alt="Local Devices"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Frames</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="Frames">
<h1>Frames<a class="headerlink" href="#Frames" title="Permalink to this heading">#</a></h1>
<p>A frames object is literally a <code class="docutils literal notranslate"><span class="pre">xr.DataArray</span></code> object with certain properties and an expected structure with coordinates and variables. In this section, we show what you can do with such an object.</p>
<p>As shown in the videos section, such an object can be directly derived from a video object using the method <code class="docutils literal notranslate"><span class="pre">video.get_frames</span></code>. An example of the <code class="docutils literal notranslate"><span class="pre">xr.DataArray</span></code> structure returned is shown below, with an <code class="docutils literal notranslate"><span class="pre">method=&quot;rgb&quot;</span></code> setting to get a color image back (default is grayscale).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyorc</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="c1"># set a video filename below, change to your own local file location</span>
<span class="n">video_file</span> <span class="o">=</span> <span class="s2">&quot;../../../examples/ngwerere/ngwerere_20191103.mp4&quot;</span>
<span class="c1"># point to a file containing the camera configuration</span>
<span class="n">cam_config</span> <span class="o">=</span> <span class="n">pyorc</span><span class="o">.</span><span class="n">load_camera_config</span><span class="p">(</span><span class="s2">&quot;../../../examples/ngwerere/ngwerere.json&quot;</span><span class="p">)</span>
<span class="n">video</span> <span class="o">=</span> <span class="n">pyorc</span><span class="o">.</span><span class="n">Video</span><span class="p">(</span>
    <span class="n">video_file</span><span class="p">,</span>
    <span class="n">camera_config</span><span class="o">=</span><span class="n">cam_config</span><span class="p">,</span>
    <span class="n">start_frame</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">end_frame</span><span class="o">=</span><span class="mi">125</span><span class="p">,</span>
    <span class="n">stabilize</span><span class="o">=</span><span class="s2">&quot;fixed&quot;</span>
<span class="p">)</span>
<span class="n">da_frames</span> <span class="o">=</span> <span class="n">video</span><span class="o">.</span><span class="n">get_frames</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;rgb&quot;</span><span class="p">)</span>
<span class="n">da_frames</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ValueError</span>                                Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[1]</span><span class="ansi-green-fg">, line 7</span>
<span class="ansi-green-fg">      5</span> <span style="color: rgb(95,135,135)"># point to a file containing the camera configuration</span>
<span class="ansi-green-fg">      6</span> cam_config = pyorc.load_camera_config(<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">../../../examples/ngwerere/ngwerere.json</span><span class="ansi-yellow-fg">&#34;</span>)
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">7</span> video = <span class="ansi-yellow-bg">pyorc</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">Video</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-fg">      8</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">video_file</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">      9</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">camera_config</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">cam_config</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">     10</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">start_frame</span><span class="ansi-yellow-bg">=</span><span class="ansi-green-fg ansi-yellow-bg">0</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">     11</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">end_frame</span><span class="ansi-yellow-bg">=</span><span class="ansi-green-fg ansi-yellow-bg">125</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">     12</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">stabilize</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-fg ansi-yellow-bg">&#34;</span><span class="ansi-yellow-fg ansi-yellow-bg">fixed</span><span class="ansi-yellow-fg ansi-yellow-bg">&#34;</span>
<span class="ansi-green-fg">     13</span> <span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">     14</span> da_frames = video.get_frames(method=<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">rgb</span><span class="ansi-yellow-fg">&#34;</span>)
<span class="ansi-green-fg">     15</span> da_frames

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/usr/share/miniconda/envs/pyorc-dev/lib/python3.12/site-packages/pyorc/api/video.py:144</span>, in <span class="ansi-cyan-fg">Video.__init__</span><span class="ansi-blue-fg">(self, fn, camera_config, h_a, start_frame, end_frame, freq, chunksize, stabilize, lazy, rotation, fps, progress)</span>
<span class="ansi-green-fg">    141</span> <span style="color: rgb(95,135,135)"># explicitly open file for reading</span>
<span class="ansi-green-fg">    142</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> <span style="color: rgb(0,135,0)">self</span>.stabilize <span class="ansi-bold" style="color: rgb(175,0,255)">is</span> <span class="ansi-bold" style="color: rgb(175,0,255)">not</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>:
<span class="ansi-green-fg">    143</span>     <span style="color: rgb(95,135,135)"># set a gridded mask based on the roi points</span>
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">144</span>     <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">set_mask_from_exterior</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">stabilize</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    145</span> <span style="color: rgb(95,135,135)"># set end and start frame</span>
<span class="ansi-green-fg">    146</span> <span style="color: rgb(0,135,0)">self</span>.frame_count = <span style="color: rgb(0,135,0)">int</span>(cap.get(cv2.CAP_PROP_FRAME_COUNT)) - <span class="ansi-green-fg">1</span>

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/usr/share/miniconda/envs/pyorc-dev/lib/python3.12/site-packages/pyorc/api/video.py:535</span>, in <span class="ansi-cyan-fg">Video.set_mask_from_exterior</span><span class="ansi-blue-fg">(self, exterior)</span>
<span class="ansi-green-fg">    521</span> <span class="ansi-bold" style="color: rgb(0,135,0)">def</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-blue-fg">set_mask_from_exterior</span>(<span style="color: rgb(0,135,0)">self</span>, exterior: List[List]):
<span class="ansi-green-fg">    522</span> <span style="color: rgb(188,188,188)">    </span><span class="ansi-yellow-fg">&#34;&#34;&#34;Prepare a mask grid with 255 outside of the stabilization polygon and 0 inside.</span>
<span class="ansi-green-fg">    523</span>
<span class="ansi-green-fg">    524</span> <span class="ansi-yellow-fg">    Parameters</span>
<span class="ansi-green-fg">   (...)</span><span class="ansi-green-fg">    533</span>
<span class="ansi-green-fg">    534</span> <span class="ansi-yellow-fg">    &#34;&#34;&#34;</span>
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">535</span>     mask_coords = <span class="ansi-yellow-bg">np</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">array</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg">exterior</span><span class="ansi-yellow-bg">]</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">dtype</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">np</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">int32</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    536</span>     mask = np.zeros((<span style="color: rgb(0,135,0)">self</span>.height, <span style="color: rgb(0,135,0)">self</span>.width), np.uint8)
<span class="ansi-green-fg">    537</span>     mask = cv2.fillPoly(mask, [mask_coords], <span class="ansi-green-fg">255</span>)

<span class="ansi-red-fg">ValueError</span>: invalid literal for int() with base 10: &#39;fixed&#39;
</pre></div></div>
</div>
<p>It can be seen that this <code class="docutils literal notranslate"><span class="pre">xr.DataArray</span></code> contains a data blob with all the frames (i.e. <code class="docutils literal notranslate"><span class="pre">time:</span> <span class="pre">125</span></code> meaning we have 125 frames at our disposal for the further analysis) and a <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> coordinate system, which simply is a column and row count for the pixels in the image objective. We are looking an HD video here, and so this column and row count is 1920x1080. We also have a dimension <code class="docutils literal notranslate"><span class="pre">rgb</span></code> because we hold 3 channels for each image. If you would call <code class="docutils literal notranslate"><span class="pre">get_frames</span></code> without any
arguments, you would not get this. A few things are noteworthy to further explain about some of the coordinates and attributes.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">time</span></code>: contains an axis which measures the time since the first frame in seconds. It is based on the frames per second property of the video.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xp</span></code> and <code class="docutils literal notranslate"><span class="pre">yp</span></code> are very similar to <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>, but they contain a mesh of row, column coordinates, instead of only a 1-dimensional axis. This is required for some of the methods that can be applied on a frames <code class="docutils literal notranslate"><span class="pre">xr.DataArray</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">camera_config</span></code>: crucial for a frames <code class="docutils literal notranslate"><span class="pre">xr.DataArray</span></code> is to have understanding of the camera’s properties and perspective and relationship with geography. This is all stored in your camera configuration, hence, this camera configuration is also provided to the <code class="docutils literal notranslate"><span class="pre">xr.DataArray</span></code> storing your frames. It will be used for further processing steps, in particular reprojection.</p></li>
</ul>
<section id="Methods-for-frames">
<h2>Methods for frames<a class="headerlink" href="#Methods-for-frames" title="Permalink to this heading">#</a></h2>
<p>Any manipulation to a frames object that is really particular to the fact you are looking at a frames <code class="docutils literal notranslate"><span class="pre">xr.DataArray</span></code> as opposed to any other <code class="docutils literal notranslate"><span class="pre">xr.DataArray</span></code> can be found behind a subclass called <code class="docutils literal notranslate"><span class="pre">frames</span></code>. So to call such a functionality, e.g. the plotting method, you basically call <code class="docutils literal notranslate"><span class="pre">da_frames.frames.plot</span></code>. Let’s try that.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">da_frames</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[2]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> <span class="ansi-yellow-bg">da_frames</span>.frames.plot()

<span class="ansi-red-fg">NameError</span>: name &#39;da_frames&#39; is not defined
</pre></div></div>
</div>
<p>That gave an error. You can see that the API gives specific feedback that the <code class="docutils literal notranslate"><span class="pre">.frames.plot</span></code> method does not work on a frames array with several time steps. This is simply because you can only plot one step at the time. You can select a step, with normal <code class="docutils literal notranslate"><span class="pre">xarray</span></code> methods, which are very similar to <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, and then try it again.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># only plot time index 0</span>
<span class="n">da_frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[3]</span><span class="ansi-green-fg">, line 2</span>
<span class="ansi-green-fg">      1</span> <span style="color: rgb(95,135,135)"># only plot time index 0</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">2</span> <span class="ansi-yellow-bg">da_frames</span>[<span class="ansi-green-fg">0</span>].frames.plot()

<span class="ansi-red-fg">NameError</span>: name &#39;da_frames&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Improving-contrast">
<h2>Improving contrast<a class="headerlink" href="#Improving-contrast" title="Permalink to this heading">#</a></h2>
<p>There are a number of ways to improve contrast of moving features. These so far include the following methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">frames.normalization</span></code>: removes the average of a number of frames in time. This then yields a better contrast of moving things, compared to static things. This is particularly useful to remove visuals of the bottom, when you have very transparent water. You can set the amount of frames used for averaging.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frames.edge_detect</span></code>: enhances the visibility of strong spatial gradients in the frame, by applying two kernel filters on the individual frames with varying window sizes, and returning the difference between the filtered images.</p></li>
</ul>
<p>These operations apply the filter on all frames, and return the result again as a frames <code class="docutils literal notranslate"><span class="pre">xr.DataArray</span></code>, but then with the filters applied. They can only be applied on single channel (i.e. greyscale) images.</p>
<p>We show a result of applying both filters on the first frame below.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">da_grey</span> <span class="o">=</span> <span class="n">video</span><span class="o">.</span><span class="n">get_frames</span><span class="p">()</span>
<span class="n">da_norm</span> <span class="o">=</span> <span class="n">da_grey</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
<span class="n">da_edge</span> <span class="o">=</span> <span class="n">da_norm</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">edge_detect</span><span class="p">(</span><span class="n">wdw_1</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">wdw_2</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">da_edge</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">vmin</span><span class="o">=-</span><span class="mi">10</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;RdBu_r&quot;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[4]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> da_grey = <span class="ansi-yellow-bg">video</span>.get_frames()
<span class="ansi-green-fg">      2</span> da_norm = da_grey.frames.normalize()
<span class="ansi-green-fg">      3</span> da_edge = da_norm.frames.edge_detect(wdw_1=<span class="ansi-green-fg">6</span>, wdw_2=<span class="ansi-green-fg">10</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;video&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Projection">
<h2>Projection<a class="headerlink" href="#Projection" title="Permalink to this heading">#</a></h2>
<p>Essential for velocity estimation is the projection part. If you have a proper <code class="docutils literal notranslate"><span class="pre">CameraConfig</span></code> in your video, which includes the intrinsic matrix and possible distortion coefficients of your camera lens, and ground control points that gives pairs of real-world 3D coordinates and coordinates as they are in your 2D objective, then you can reproject your data into real-world coordinates. For PIV typically, we recommend to reproject to a resolution of 2 to 5 cm (i.e. 0.02 to 0.05). 5 cm is in our
expertise usually sufficient, but dependent on the scale of structure that you may wish to follow, you may have to change this into a lower resolution. Let’s have a look at a reprojected image. Note that this can also be done in RGB.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># let&#39;s retrieve rgb frames</span>
<span class="n">da_rgb</span> <span class="o">=</span> <span class="n">video</span><span class="o">.</span><span class="n">get_frames</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;rgb&quot;</span><span class="p">)</span>
<span class="c1"># now reproject</span>
<span class="n">da_proj</span> <span class="o">=</span> <span class="n">da_rgb</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">project</span><span class="p">()</span>
<span class="c1"># and plot!</span>
<span class="n">da_proj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[5]</span><span class="ansi-green-fg">, line 2</span>
<span class="ansi-green-fg">      1</span> <span style="color: rgb(95,135,135)"># let&#39;s retrieve rgb frames</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">2</span> da_rgb = <span class="ansi-yellow-bg">video</span>.get_frames(method=<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">rgb</span><span class="ansi-yellow-fg">&#34;</span>)
<span class="ansi-green-fg">      3</span> <span style="color: rgb(95,135,135)"># now reproject</span>
<span class="ansi-green-fg">      4</span> da_proj = da_rgb.frames.project()

<span class="ansi-red-fg">NameError</span>: name &#39;video&#39; is not defined
</pre></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">edge_detection</span></code> filter can better be applied on already projected images, in order to ensure that the window sizes set for the filters are in the real spatial domain. The reprojection above is 0.01 meter in resolution, hence if you wish to reveal edges of structure of a few centimeters in size, the filter sizes should be in that range as well. An example with window sizes of 2 and 4 pixels (i.e. 2 and 4 centimeter) on projected grayscale images is given below.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># repeat the reprojection, but now with normalizes images, and with greyscale.</span>
<span class="c1"># let&#39;s retrieve rgb frames</span>
<span class="n">da_grey</span> <span class="o">=</span> <span class="n">video</span><span class="o">.</span><span class="n">get_frames</span><span class="p">()</span>
<span class="c1"># normalize first. This can be done in the original objective</span>
<span class="n">da_norm</span> <span class="o">=</span> <span class="n">da_grey</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
<span class="c1"># now reproject</span>
<span class="n">da_proj</span> <span class="o">=</span> <span class="n">da_norm</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">project</span><span class="p">()</span>
<span class="c1"># after reprojection, do edge detection</span>
<span class="n">da_edge</span> <span class="o">=</span> <span class="n">da_proj</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">edge_detect</span><span class="p">(</span><span class="n">wdw_1</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">wdw_2</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="c1"># and plot!</span>
<span class="n">da_edge</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">vmin</span><span class="o">=-</span><span class="mi">10</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;RdBu_r&quot;</span><span class="p">)</span>
<br/><br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[6]</span><span class="ansi-green-fg">, line 3</span>
<span class="ansi-green-fg">      1</span> <span style="color: rgb(95,135,135)"># repeat the reprojection, but now with normalizes images, and with greyscale.</span>
<span class="ansi-green-fg">      2</span> <span style="color: rgb(95,135,135)"># let&#39;s retrieve rgb frames</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">3</span> da_grey = <span class="ansi-yellow-bg">video</span>.get_frames()
<span class="ansi-green-fg">      4</span> <span style="color: rgb(95,135,135)"># normalize first. This can be done in the original objective</span>
<span class="ansi-green-fg">      5</span> da_norm = da_grey.frames.normalize()

<span class="ansi-red-fg">NameError</span>: name &#39;video&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Plotting">
<h2>Plotting<a class="headerlink" href="#Plotting" title="Permalink to this heading">#</a></h2>
<p>Geographical awareness is a really important feature of the frames <code class="docutils literal notranslate"><span class="pre">xr.DataArray</span></code> objects. So far we performed plotting in a local projection. The figure above has units meters on both the x-axis and y-axis. But after projection, geographical projections are also stored if the user supplied a coordinate reference system in the <code class="docutils literal notranslate"><span class="pre">CameraConfig</span></code>. Below you can see that new coordinate variables <code class="docutils literal notranslate"><span class="pre">lon</span></code> and <code class="docutils literal notranslate"><span class="pre">lat</span></code> are available on all project <code class="docutils literal notranslate"><span class="pre">xr.DataArray</span></code> variables. The <code class="docutils literal notranslate"><span class="pre">mode</span></code> option with
value <code class="docutils literal notranslate"><span class="pre">geographical</span></code> is used to decide which mode to use.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">da_edge</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[7]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> <span class="ansi-yellow-bg">da_edge</span>

<span class="ansi-red-fg">NameError</span>: name &#39;da_edge&#39; is not defined
</pre></div></div>
</div>
<p>These new coordinate variables can be interpreted by the <code class="docutils literal notranslate"><span class="pre">.frames.plot</span></code> functionality to also make a geographical plot, which can be combined with other geographical data you may have,m such as background maps, OpenStreetMap, satellite background and so on. The <code class="docutils literal notranslate"><span class="pre">cartopy</span></code> package is used to provide this geographical awareness to your plots. We refer to <a class="reference external" href="https://scitools.org.uk/cartopy/docs/latest/">cartopy’s documentation</a> for more information. An example of geographical plots and the
camera’s objective plot are provided below. Note that the <code class="docutils literal notranslate"><span class="pre">.frames.plot</span></code> function always returns the mappable. This can then be used to retrieve the axes of the mappable for instance to add other things to that axes, or to add a legend or colorbar.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">cartopy.io.img_tiles</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">cimgt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">cartopy.crs</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ccrs</span>
<span class="c1"># when using mode=&quot;geographical&quot; and not supplying an axes, the plot function will make a geogrpahical aware axes</span>
<span class="c1"># for you.</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">da_edge</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;geographical&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">10</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;RdBu_r&quot;</span><span class="p">)</span>
<span class="c1"># tiles = cimgt.OSM()</span>
<span class="n">tiles</span> <span class="o">=</span> <span class="n">cimgt</span><span class="o">.</span><span class="n">GoogleTiles</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;satellite&quot;</span><span class="p">)</span>
<span class="c1"># add a google satellite image using cartopy functionality</span>
<span class="n">p</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">add_image</span><span class="p">(</span><span class="n">tiles</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span>
<span class="c1"># zoom out a little bit so that we can actually see a bit</span>
<span class="n">p</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span>
    <span class="n">da_edge</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">-</span> <span class="mf">0.0005</span><span class="p">,</span>
    <span class="n">da_edge</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">+</span> <span class="mf">0.0005</span><span class="p">,</span>
    <span class="n">da_edge</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">-</span> <span class="mf">0.0005</span><span class="p">,</span>
    <span class="n">da_edge</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">+</span> <span class="mf">0.0005</span><span class="p">],</span>
    <span class="n">crs</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[8]</span><span class="ansi-green-fg">, line 5</span>
<span class="ansi-green-fg">      2</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-blue-intense-fg ansi-bold">cartopy</span><span class="ansi-blue-intense-fg ansi-bold">.</span><span class="ansi-blue-intense-fg ansi-bold">crs</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-bold" style="color: rgb(0,135,0)">as</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-blue-intense-fg ansi-bold">ccrs</span>
<span class="ansi-green-fg">      3</span> <span style="color: rgb(95,135,135)"># when using mode=&#34;geographical&#34; and not supplying an axes, the plot function will make a geogrpahical aware axes</span>
<span class="ansi-green-fg">      4</span> <span style="color: rgb(95,135,135)"># for you.</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">5</span> p = <span class="ansi-yellow-bg">da_edge</span>[<span class="ansi-green-fg">0</span>].frames.plot(mode=<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">geographical</span><span class="ansi-yellow-fg">&#34;</span>, vmin=-<span class="ansi-green-fg">10</span>, vmax=<span class="ansi-green-fg">10</span>, cmap=<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">RdBu_r</span><span class="ansi-yellow-fg">&#34;</span>)
<span class="ansi-green-fg">      6</span> <span style="color: rgb(95,135,135)"># tiles = cimgt.OSM()</span>
<span class="ansi-green-fg">      7</span> tiles = cimgt.GoogleTiles(style=<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">satellite</span><span class="ansi-yellow-fg">&#34;</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;da_edge&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Animations">
<h2>Animations<a class="headerlink" href="#Animations" title="Permalink to this heading">#</a></h2>
<p>You can store the results of your frames operations to a video in two ways:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.frames.to_ani</span></code>: stores an animation of the frames using your provided settings. These are passed to <code class="docutils literal notranslate"><span class="pre">matplotlib.pyplot.imshow</span></code>. So all inputs to that function you are used to can be used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.frames.to_video</span></code>: this will store the values in a video file using <code class="docutils literal notranslate"><span class="pre">opencv</span></code>. It means that all values are scaled to between 0 and 255 and only greyscale video will be stored without any axis information. This is useful to quickly check the result of your operations.</p></li>
</ul>
<p>Below we give an example of how these functions work.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># we will only store the first 30 frames</span>
<span class="n">da_sel</span> <span class="o">=</span> <span class="n">da_edge</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">30</span><span class="p">]</span>

<span class="c1"># first with all color control</span>
<span class="n">da_sel</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">to_ani</span><span class="p">(</span><span class="s2">&quot;edge_ani.mp4&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">10</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;RdBu_r&quot;</span><span class="p">)</span>

<span class="c1"># now to a raw video without control over colors and axis</span>
<span class="c1"># we want to maintain the min and max range, so have to explicitly use that</span>
<span class="n">da_scaled</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">da_sel</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
<span class="n">da_scaled</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">to_video</span><span class="p">(</span><span class="s2">&quot;edge_video.mp4&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[9]</span><span class="ansi-green-fg">, line 2</span>
<span class="ansi-green-fg">      1</span> <span style="color: rgb(95,135,135)"># we will only store the first 30 frames</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">2</span> da_sel = <span class="ansi-yellow-bg">da_edge</span>[<span class="ansi-green-fg">0</span>:<span class="ansi-green-fg">30</span>]
<span class="ansi-green-fg">      4</span> <span style="color: rgb(95,135,135)"># first with all color control</span>
<span class="ansi-green-fg">      5</span> da_sel.frames.to_ani(<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">edge_ani.mp4</span><span class="ansi-yellow-fg">&#34;</span>, vmin=-<span class="ansi-green-fg">10</span>, vmax=<span class="ansi-green-fg">10</span>, cmap=<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">RdBu_r</span><span class="ansi-yellow-fg">&#34;</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;da_edge&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Methods-for-frames">Methods for frames</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Improving-contrast">Improving contrast</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Projection">Projection</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Plotting">Plotting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Animations">Animations</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../_sources/user-guide/frames/frames.ipynb.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2026, Rainbow Sensing.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>