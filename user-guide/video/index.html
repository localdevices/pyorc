

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Videos &#8212; pyorc 0.8.10 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.5ea377869091fd0449014c60fc090103.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/theme-localdevices.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user-guide/video/index';</script>
    <link rel="shortcut icon" href="../../_static/orc_favicon.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Cross Sections and water level detection" href="../cross_section/index.html" />
    <link rel="prev" title="Camera configurations" href="../camera_config/index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/orc_logo_color.svg" class="logo__image only-light" alt=""/>
    <script>document.write(`<img src="../../_static/orc_logo_color.svg" class="logo__image only-dark" alt=""/>`);</script>
  
  
    <p class="title logo__title">pyOpenRiverCam 0.8.10</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../intro.html">
    Introduction
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../installation.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../quickstart.html">
    Quick start for programmers
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api.html">
    API reference
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://localdevices.org" title="Local Devices" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/logo.svg" class="icon-link-image" alt="Local Devices"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../intro.html">
    Introduction
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../installation.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../quickstart.html">
    Quick start for programmers
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api.html">
    API reference
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://localdevices.org" title="Local Devices" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/logo.svg" class="icon-link-image" alt="Local Devices"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Table of Content</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command-line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">Application Programming Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../camera_config/index.html">Camera configurations</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cross_section/index.html">Cross sections and water level detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../frames/index.html">Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="../velocimetry/index.html">Velocimetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../transect/index.html">Transects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plot/index.html">Plotting</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Videos</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="videos">
<span id="video-ug"></span><h1>Videos<a class="headerlink" href="#videos" title="Permalink to this heading">#</a></h1>
<p>Videos and video files are at the core of <em>pyorc</em>. Any analysis starts with a video file. Notably, these can be acquired
from different platforms, with suggestions given in the table below.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Platform</p></th>
<th class="head"><p>Use cases</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Smartphone</p></td>
<td><p>Ad-hoc collection of data, e.g. during a flood.
Permanent or temporary (e.g. for rating curve updates) and affordable observation
at one location that are orthorectified per video.
Permanent or temporary observations at one location with a fixed mould to
keep a permanent stable objective.</p></td>
</tr>
<tr class="row-odd"><td><p>Drone</p></td>
<td><p>Incidental observations e.g. to monitor velocity distribution around river
restoration sites, new riverine infrastructure, sediment or waste trapping
constructions or other environmental related uses.</p></td>
</tr>
<tr class="row-even"><td><p>IP-camera</p></td>
<td><p>Permanent or temporary observations at measurement site without need for physical
presence. This requires a modem and power source. A power cycling setup is
recommended to take videos in regular intervals.</p></td>
</tr>
<tr class="row-odd"><td><p>Trap camera</p></td>
<td><p>Temporary observations at measurement site without need for physical presence,
Ideal for wet season flow event capturing over a limited time until batteries
run out or SD card is full. Typically uses AA batteries</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-0">
Command-line</label><div class="sd-tab-content docutils">
<p>Whether you are setting up a camera configuration or processing a video into velocity products,
a video must always be supplied using the option argument <code class="docutils literal notranslate"><span class="pre">-V</span></code>. Within your
recipe you can define several inputs to define further what should be done with the video. The example below
demonstrates all inputs that currently can be supplied. The inputs define the start and end frame
(<code class="docutils literal notranslate"><span class="pre">start_frame</span></code> and <code class="docutils literal notranslate"><span class="pre">end_frame</span></code>), the actual water level (<code class="docutils literal notranslate"><span class="pre">h_a</span></code>) in meters during the video, which will
be compared against the water level taken with the video used for camera calibration.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">video</span><span class="p">:</span>
<span class="w">  </span><span class="nt">start_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150</span>
<span class="w">  </span><span class="nt">end_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">250</span>
<span class="w">  </span><span class="nt">h_a</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">92.23</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-1">
API</label><div class="sd-tab-content docutils">
<p><em>pyorc</em> therefore uses a so-called <code class="docutils literal notranslate"><span class="pre">Video</span></code> object to interrogate a video file, add understanding of video’s
perspective (using a <code class="docutils literal notranslate"><span class="pre">CameraConfig</span></code> object and the water level during which the video was taken)
and define which frame range you wish to use to perform analysis on.</p>
<p>Therefore you can pass a number of properties to a <code class="docutils literal notranslate"><span class="pre">Video</span></code> object so as to be able to work with it in <em>pyorc</em>.
Please read the API section on the <code class="docutils literal notranslate"><span class="pre">Video</span></code> object to get details on how to create such a <code class="docutils literal notranslate"><span class="pre">Video</span></code> object. Some
important properties are described below:</p>
</div>
</div>
<section id="camera-configuration">
<h2>Camera configuration<a class="headerlink" href="#camera-configuration" title="Permalink to this heading">#</a></h2>
<p>Essential for almost all steps after opening a video is to supply a <a class="reference internal" href="../camera_config/index.html#camera-config-ug"><span class="std std-ref">camera configuration</span></a> with a video. This object contains
all information from the camera’s lens characteristics, perspective, geographical awareness as derived from a sample
image or frame, with control point information in view.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-2">
Command-line</label><div class="sd-tab-content docutils">
<p>When processing for velocimetry, a camera configuration must be supplied through the
option <code class="docutils literal notranslate"><span class="pre">-c</span></code>, followed by the path to the file containing the camera configuration. If you do not yet have
a camera configuration, then first go to the section on <a class="reference internal" href="../camera_config/index.html#camera-config-ug"><span class="std std-ref">camera configuration</span></a> and
construct a camera configuration with these guidelines.</p>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-3">
API</label><div class="sd-tab-content docutils">
<p>As soon as you wish to work with the frames in the video
(e.g. by calling the method <code class="docutils literal notranslate"><span class="pre">get_frames</span></code>) you MUST specify a camera configuration. This is done through the
argument <code class="docutils literal notranslate"><span class="pre">camera_config</span></code> with which you can either supply the path to a camera configuration file, stored
on your disk, or an already loaded camera configuration. You may load a camera configuration in memory
with the helper function <code class="docutils literal notranslate"><span class="pre">pyorc.load_camera_config</span></code>. You can find more information on camera configurations,
how to set these up in the <a class="reference internal" href="../camera_config/index.html#camera-config-ug"><span class="std std-ref">Camera configurations</span></a> section.</p>
</div>
</div>
</section>
<section id="the-current-water-level">
<h2>The current water level<a class="headerlink" href="#the-current-water-level" title="Permalink to this heading">#</a></h2>
<p>If you decide to take multiple videos of the same objective, for instance with a fixed camera rig, or with a smartphone
in a fixed rig, then you can reuse the camera configuration for each video. This is because as long as the perspective does
not change (i.e. you are looking at exactly the same scene from the same location) then also the camera configuration
can remain exactly the same. This is ideal for gathering time series, for instance to interpret river flow during an
event or for permanent video observations of river flow. Per video, there is only one thing that must be provided. This
is the present water level. This can be provided in a locally selected datum (e.g. the level as read from a staff gauge)
and will be related to the water level, as read during the survey, used to construct the camera configuration.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-4" name="sd-tab-set-2" type="radio">
<label class="sd-tab-label" for="sd-tab-item-4">
Command-line</label><div class="sd-tab-content docutils">
<p>You can supply the “current” water level with the <code class="docutils literal notranslate"><span class="pre">-h</span></code> (short) or <code class="docutils literal notranslate"><span class="pre">--h_a</span></code> (long) option. You can also insert the
water level in the recipe yaml (although this is less practical mostly). The example below will process a video
with a water level reading of 92.23 meters. If you do not supply it, <code class="docutils literal notranslate"><span class="pre">pyorc</span></code> will assume the water level is
the same as in the control video. With incidental observations (e.g. with a drone survey), the video used to
setup the camera configuration and video processed here will be the same, and in this case you can simply leave
out the current water level.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">video</span><span class="p">:</span>
<span class="w">  </span><span class="nt">h_a</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">92.23</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-2" type="radio">
<label class="sd-tab-label" for="sd-tab-item-5">
API</label><div class="sd-tab-content docutils">
<p>The “current” water level (i.e. commensurate with the situation in the video you are currently processing) can
be set by passing the argument <code class="docutils literal notranslate"><span class="pre">h_a</span></code> upon creating a <code class="docutils literal notranslate"><span class="pre">Video</span></code> object, e.g.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyorc</span>
<span class="n">video_file</span> <span class="o">=</span> <span class="s2">&quot;../examples/ngwerere/ngwerere_20191103.mp4&quot;</span>
<span class="n">video</span> <span class="o">=</span> <span class="n">pyorc</span><span class="o">.</span><span class="n">Video</span><span class="p">(</span><span class="n">video_file</span><span class="p">,</span> <span class="n">camera_config</span><span class="o">=</span><span class="n">cam_conf_file</span><span class="p">,</span> <span class="n">h_a</span><span class="o">=</span><span class="mf">92.23</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To guarantee that the perspective does not change, the following conditions MUST be met:</p>
<blockquote>
<div><ul class="simple">
<li><p>The same lens must be used as used for the control image of the camera configuration. Note that smartphones often
have multiple lenses e.g. for wide angle versus close-ups. Ensure you have zoom level at the same level as used
for the control image and do not use digital zoom! It generally only reduces image quality.</p></li>
<li><p>The camera must be placed at exactly the same location and oriented to exactly the same objective</p></li>
<li><p>The camera’s resolution and other settings must be exactly the same as during the control image.</p></li>
</ul>
</div></blockquote>
</div>
</section>
<section id="frame-range">
<h2>Frame range<a class="headerlink" href="#frame-range" title="Permalink to this heading">#</a></h2>
<p>You may have recorded a relatively long video and only wish to process a subset of frames. This can be controlled by
providing a start frame and end frame.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-6" name="sd-tab-set-3" type="radio">
<label class="sd-tab-label" for="sd-tab-item-6">
Command-line</label><div class="sd-tab-content docutils">
<p>You may select a start and end frame in the recipe by providing <code class="docutils literal notranslate"><span class="pre">start_frame</span></code> and <code class="docutils literal notranslate"><span class="pre">end_frame</span></code> in the video
section. The example below will process from frame 150 until frame 250.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">video</span><span class="p">:</span>
<span class="w">  </span><span class="nt">start_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150</span>
<span class="w">  </span><span class="nt">end_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">250</span>
<span class="w">  </span><span class="nt">h_a</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">92.23</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-7" name="sd-tab-set-3" type="radio">
<label class="sd-tab-label" for="sd-tab-item-7">
API</label><div class="sd-tab-content docutils">
<p>Start and end frames can be provided with the <code class="docutils literal notranslate"><span class="pre">start_frame</span></code> and <code class="docutils literal notranslate"><span class="pre">end_frame</span></code> arguments.
If you set this to an integer larger than 0 and smaller than the maximum frames available, then only the frames
in between will be processed.</p>
</div>
</div>
</section>
<section id="rotation">
<span id="video-rotation"></span><h2>Rotation<a class="headerlink" href="#rotation" title="Permalink to this heading">#</a></h2>
<p>Generally, videos that are taken in portrait position with a smartphone, are automatically rotated upon loading.
If you use a camera that does not recognize the rotation, then you may also supply a rotation upon loading a video.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-8" name="sd-tab-set-4" type="radio">
<label class="sd-tab-label" for="sd-tab-item-8">
Command-line</label><div class="sd-tab-content docutils">
<p>You can set a rotation by providing <code class="docutils literal notranslate"><span class="pre">rotation</span></code> in the video
section and supply either 90, 180, or 270 degrees which are clockwise rotations. The example below for
instance rotates clockwise by 90 degrees.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">video</span><span class="p">:</span>
<span class="w">  </span><span class="nt">start_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150</span>
<span class="w">  </span><span class="nt">end_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">250</span>
<span class="w">  </span><span class="nt">h_a</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">92.23</span>
<span class="w">  </span><span class="nt">rotation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">90</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-9" name="sd-tab-set-4" type="radio">
<label class="sd-tab-label" for="sd-tab-item-9">
API</label><div class="sd-tab-content docutils">
<p>You can set a rotation by providing <code class="docutils literal notranslate"><span class="pre">rotation</span></code> in the <code class="docutils literal notranslate"><span class="pre">Video</span></code> instance. Only values 90, 180, or 270
degrees (clockwise) are accepted. E.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyorc</span>
<span class="n">video_file</span> <span class="o">=</span> <span class="s2">&quot;some_portrait_video_file.mp4&quot;</span>
<span class="n">cam_conf_file</span> <span class="o">=</span> <span class="s2">&quot;some_cam_config.json&quot;</span>
<span class="n">video</span> <span class="o">=</span> <span class="n">pyorc</span><span class="o">.</span><span class="n">Video</span><span class="p">(</span><span class="n">video_file</span><span class="p">,</span> <span class="n">camera_config</span><span class="o">=</span><span class="n">cam_conf_file</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="stabilization">
<h2>Stabilization<a class="headerlink" href="#stabilization" title="Permalink to this heading">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Video stabilization is still experimental. Please raise an issue on Github with a link to a video if you experience
issues.</p>
</div>
<p>Videos may be taken in unsteady conditions. This may happen e.g. with slight movements of a smartphone, a
drone that has varying air pressure conditions or wind gusts to deal with, or even fixed cameras in strong winds. But
also, someone may have taken an incidental video, that was not originally intended to be used for river flow and velocity
observations, but may render important information about a flood. For this the <code class="docutils literal notranslate"><span class="pre">stabilize</span></code> option can be passed with
a stabilization strategy as input. The stabilization may already be set during the camera configuration and this is
in most cases the recommended approach. You may also arrange stabilization per video, and then supply a list of
[column, row] coordinates in the recipe. With this option, each frame will be stabilized with respect to the start frame chosen by the user
(through the option <code class="docutils literal notranslate"><span class="pre">start_frame</span></code>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently we don’t yet have an interactive functionality to provide the mask exterior. We will establish this
in forthcoming updates so that the <code class="docutils literal notranslate"><span class="pre">mask_exterior</span></code> can already be defined in the camera configuration with
a few mouse clicks.</p>
</div>
<div class="pst-scrollable-table-container"><table class="table" id="id1">
<caption><span class="caption-text">Small part of 4K drone footage in Rio Grande - Brazil, showing left: no stabilization applied; right:
       stabilization applied with <code class="docutils literal notranslate"><span class="pre">stabilize=&quot;fixed&quot;</span></code>. The algorithm automatically detects rigid points on river
       banks but also on the debris showed in this subscene.</span><a class="headerlink" href="#id1" title="Permalink to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p>Unstable</p></th>
<th class="head" rowspan="2"><p>Stable</p></th>
</tr>
<tr class="row-even"></tr>
</thead>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../../_images/video_unstable.gif"><img alt="videounstab" class="align-middle" src="../../_images/video_unstable.gif" style="width: 400.0px; height: 292.8px;" /></a></p></td>
<td><p><a class="reference internal" href="../../_images/video_stable.gif"><img alt="videostab" class="align-middle" src="../../_images/video_stable.gif" style="width: 400.0px; height: 292.8px;" /></a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-10" name="sd-tab-set-5" type="radio">
<label class="sd-tab-label" for="sd-tab-item-10">
Command-line</label><div class="sd-tab-content docutils">
<p>Add the <code class="docutils literal notranslate"><span class="pre">stabilize</span></code> option in the recipe with the name of the stabilization strategy as argument. Below, a
full example is provided including a set of coordinates that bounds the water surface. These are provides as
[column, row] pairs under the <code class="docutils literal notranslate"><span class="pre">mask_exterior</span></code> option.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">video</span><span class="p">:</span>
<span class="w">  </span><span class="nt">start_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150</span>
<span class="w">  </span><span class="nt">end_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">250</span>
<span class="w">  </span><span class="nt">h_a</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">92.23</span>
<span class="w">  </span><span class="nt">stabilize</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">816</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2160</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">744</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">3287</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">3374</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2160</span><span class="p p-Indicator">]]</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-11" name="sd-tab-set-5" type="radio">
<label class="sd-tab-label" for="sd-tab-item-11">
API</label><div class="sd-tab-content docutils">
<p>A working example to obtain a stabilized video from our example section is provided below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyorc</span>

<span class="c1"># set a video filename below, change to your own local file location</span>
<span class="n">video_file</span> <span class="o">=</span> <span class="s2">&quot;examples/ngwerere/ngwerere_20191103.mp4&quot;</span>
<span class="c1"># point to a file containing the camera configuration</span>
<span class="n">cam_config</span> <span class="o">=</span> <span class="n">pyorc</span><span class="o">.</span><span class="n">load_camera_config</span><span class="p">(</span><span class="s2">&quot;examples/ngwerere/ngwerere.json&quot;</span><span class="p">)</span>
<span class="n">video</span> <span class="o">=</span> <span class="n">pyorc</span><span class="o">.</span><span class="n">Video</span><span class="p">(</span>
    <span class="n">video_file</span><span class="p">,</span>
    <span class="n">camera_config</span><span class="o">=</span><span class="n">cam_config</span><span class="p">,</span>
    <span class="n">start_frame</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">end_frame</span><span class="o">=</span><span class="mi">125</span><span class="p">,</span>
    <span class="n">stabilize</span><span class="o">=</span><span class="p">[[</span><span class="mi">150</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">500</span><span class="p">,</span> <span class="mi">1080</span><span class="p">],</span> <span class="p">[</span><span class="mi">1750</span><span class="p">,</span> <span class="mi">1080</span><span class="p">],</span> <span class="p">[</span><span class="mi">900</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
<span class="p">)</span>
<span class="n">video</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you choose to only treat a very short part of a video such as only one second, then it may be difficult for the
stabilizing functions to distinguish rigid points from non-rigid. In this case we recommend to set <code class="docutils literal notranslate"><span class="pre">start_frame</span></code>
and <code class="docutils literal notranslate"><span class="pre">end_frame</span></code> to cover a larger time span, and then make a sub-selection after having retrieved the frames
from the video. This will not be significantly slower, because <em>pyorc</em> utilizes a lazy programming approach and
will then only load and process the frames you select afterwards.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># start with a large frame set for detecting rigid points</span>
<span class="n">video</span> <span class="o">=</span> <span class="n">pyorc</span><span class="o">.</span><span class="n">Video</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="n">start_frame</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">end_frame</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="c1"># get your frames, and only the first 30</span>
<span class="n">da_frames</span> <span class="o">=</span> <span class="n">video</span><span class="o">.</span><span class="n">get_frames</span><span class="p">()[</span><span class="mi">0</span><span class="p">:</span><span class="mi">30</span><span class="p">]</span>
<span class="c1"># do the rest of your work</span>
</pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="getting-frames">
<h2>Getting frames<a class="headerlink" href="#getting-frames" title="Permalink to this heading">#</a></h2>
<p>When your video object is setup with a <a class="reference internal" href="../camera_config/index.html#camera-config-ug"><span class="std std-ref">camera configuration</span></a>, optional stabilization,
and start and end frame, then extracting frames, and working with these to sharpen features, reproject and store these
becomes very easy.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-12" name="sd-tab-set-6" type="radio">
<label class="sd-tab-label" for="sd-tab-item-12">
Command-line</label><div class="sd-tab-content docutils">
<p>Frames will be extracted automatically when a <code class="docutils literal notranslate"><span class="pre">frames</span></code> section is available in the recipe. More on the use of
frames can be found in <a class="reference internal" href="../frames/index.html#frames-ug"><span class="std std-ref">frames section</span></a></p>
</div>
<input id="sd-tab-item-13" name="sd-tab-set-6" type="radio">
<label class="sd-tab-label" for="sd-tab-item-13">
API</label><div class="sd-tab-content docutils">
<p>To extract all frames, you only need to call <code class="docutils literal notranslate"><span class="pre">video.get_frames()</span></code>. This will five you grayscale
frames, in a <code class="docutils literal notranslate"><span class="pre">xr.DataArray</span></code> object. The structure of this object follows a specific data model for frames, and
therefore, methods that work on sets of frames can be applied, as described in the next section on <a class="reference internal" href="../../api.html#frames"><span class="std std-ref">Frames subclass</span></a>.</p>
</div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../camera_config/index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Camera configurations</p>
      </div>
    </a>
    <a class="right-next"
       href="../cross_section/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Cross Sections and water level detection</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#camera-configuration">Camera configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-current-water-level">The current water level</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#frame-range">Frame range</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rotation">Rotation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stabilization">Stabilization</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-frames">Getting frames</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../_sources/user-guide/video/index.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Rainbow Sensing.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>