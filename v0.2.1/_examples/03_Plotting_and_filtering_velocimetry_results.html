
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Immersive plotting and analyzing results &#8212; pyorc 0.2.1 documentation</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Obtain a discharge measurement over a cross section" href="04_Extracting_crosssection_velocities_and_discharge.html" />
    <link rel="prev" title="Analyze surface velocities of a video with velocimetry" href="02_Process_velocimetry.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    <p class="title logo__title">pyorc 0.2.1 documentation</p>
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../intro.html">
  Introduction
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../installation.html">
  Installation
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../quickstart.html">
  Quick start
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api.html">
  API reference
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Table of Content
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="01_Camera_Configuration_single_video.html">
   Setup a camera configuration for processing a single video
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02_Process_velocimetry.html">
   Analyze surface velocities of a video with velocimetry
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Immersive plotting and analyzing results
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04_Extracting_crosssection_velocities_and_discharge.html">
   Obtain a discharge measurement over a cross section
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Plotting-in-local-projection">
   Plotting in local projection
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Filtering-of-results">
   Filtering of results
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Immersive-and-intuitive-augmented-reality">
   Immersive and intuitive augmented reality
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Store-the-final-filtered-results">
   Store the final filtered results
  </a>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<section id="Immersive-plotting-and-analyzing-results">
<h1>Immersive plotting and analyzing results<a class="headerlink" href="#Immersive-plotting-and-analyzing-results" title="Permalink to this heading">#</a></h1>
<p>Lets do some analysis and plotting</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">pyorc</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">Normalize</span>
<br/></pre></div>
</div>
</div>
<p>You have a result stored in a NetCDF file after running notebook 02. Now you want to see if the results seem to make sense, and further analyze these. Especially post-processing of your results with filter is an essential step in most velocimetry analyses, given that sometimes hardly any tracers are visible, and only spuriously correlated results were found. With some intelligence these suspicious velocities can be removed, and <code class="docutils literal notranslate"><span class="pre">pyorc</span></code> has many methods available to do that. Most of these can
be applied without any parameter changes for a good results.</p>
<p>Let’s first have a look at the file structure. We can simply use the <code class="docutils literal notranslate"><span class="pre">xarray</span></code> API to open the result file.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s2">&quot;ngwerere/ngwerere_piv.nc&quot;</span><span class="p">)</span>
<span class="n">ds</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:  (time: 124, y: 63, x: 83)
Coordinates:
  * time     (time) float64 0.01667 0.05 0.08333 0.1167 ... 4.05 4.083 4.117
  * y        (y) float64 8.125 7.995 7.865 7.735 ... 0.455 0.325 0.195 0.065
  * x        (x) float64 0.065 0.195 0.325 0.455 ... 10.34 10.47 10.6 10.73
    xp       (y, x) float32 -128.8 -123.8 -119.0 -114.4 ... 975.4 970.5 965.6
    yp       (y, x) float32 -1.011e+03 -940.8 -874.2 ... 1.045e+03 1.05e+03
    xs       (y, x) float64 6.427e+05 6.427e+05 ... 6.427e+05 6.427e+05
    ys       (y, x) float64 8.304e+06 8.304e+06 ... 8.304e+06 8.304e+06
    lon      (y, x) float64 28.33 28.33 28.33 28.33 ... 28.33 28.33 28.33 28.33
    lat      (y, x) float64 -15.33 -15.33 -15.33 -15.33 ... -15.33 -15.33 -15.33
Data variables:
    v_x      (time, y, x) float32 ...
    v_y      (time, y, x) float32 ...
    s2n      (time, y, x) float32 ...
    corr     (time, y, x) float32 ...
Attributes:
    camera_shape:   [1080, 1920]
    camera_config:  {\n    &quot;crs&quot;: &quot;PROJCRS[\&quot;WGS 84 / UTM zone 35S\&quot;,BASEGEOG...
    h_a:            null</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-c1dc01d6-e3b3-4c3e-8da3-17db001478f3' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-c1dc01d6-e3b3-4c3e-8da3-17db001478f3' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 124</li><li><span class='xr-has-index'>y</span>: 63</li><li><span class='xr-has-index'>x</span>: 83</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-58beb48d-fb9c-4847-bc4e-0cbd703c6a1d' class='xr-section-summary-in' type='checkbox'  checked><label for='section-58beb48d-fb9c-4847-bc4e-0cbd703c6a1d' class='xr-section-summary' >Coordinates: <span>(9)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.01667 0.05 ... 4.083 4.117</div><input id='attrs-f727663b-e45d-4642-98d4-b0a37ea83909' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f727663b-e45d-4642-98d4-b0a37ea83909' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-70b0fc69-96d3-46e9-997c-a133a660ae06' class='xr-var-data-in' type='checkbox'><label for='data-70b0fc69-96d3-46e9-997c-a133a660ae06' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.016667, 0.05    , 0.083333, 0.116667, 0.15    , 0.183333, 0.216667,
       0.25    , 0.283333, 0.316667, 0.35    , 0.383333, 0.416667, 0.45    ,
       0.483333, 0.516667, 0.55    , 0.583333, 0.616667, 0.65    , 0.683333,
       0.716667, 0.75    , 0.783333, 0.816667, 0.85    , 0.883333, 0.916667,
       0.95    , 0.983333, 1.016667, 1.05    , 1.083333, 1.116667, 1.15    ,
       1.183333, 1.216667, 1.25    , 1.283333, 1.316667, 1.35    , 1.383333,
       1.416667, 1.45    , 1.483333, 1.516667, 1.55    , 1.583333, 1.616667,
       1.65    , 1.683333, 1.716667, 1.75    , 1.783333, 1.816667, 1.85    ,
       1.883333, 1.916667, 1.95    , 1.983333, 2.016667, 2.05    , 2.083333,
       2.116667, 2.15    , 2.183333, 2.216667, 2.25    , 2.283333, 2.316667,
       2.35    , 2.383333, 2.416667, 2.45    , 2.483333, 2.516667, 2.55    ,
       2.583333, 2.616667, 2.65    , 2.683333, 2.716667, 2.75    , 2.783333,
       2.816667, 2.85    , 2.883333, 2.916667, 2.95    , 2.983333, 3.016667,
       3.05    , 3.083333, 3.116667, 3.15    , 3.183333, 3.216667, 3.25    ,
       3.283333, 3.316667, 3.35    , 3.383333, 3.416667, 3.45    , 3.483333,
       3.516667, 3.55    , 3.583333, 3.616667, 3.65    , 3.683333, 3.716667,
       3.75    , 3.783333, 3.816667, 3.85    , 3.883333, 3.916667, 3.95    ,
       3.983333, 4.016667, 4.05    , 4.083333, 4.116667])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>8.125 7.995 7.865 ... 0.195 0.065</div><input id='attrs-2e316f37-3d70-4a0a-93f3-da799fc2d9d0' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-2e316f37-3d70-4a0a-93f3-da799fc2d9d0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4638771c-611c-4709-974f-affac810fd4e' class='xr-var-data-in' type='checkbox'><label for='data-4638771c-611c-4709-974f-affac810fd4e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([8.125, 7.995, 7.865, 7.735, 7.605, 7.475, 7.345, 7.215, 7.085, 6.955,
       6.825, 6.695, 6.565, 6.435, 6.305, 6.175, 6.045, 5.915, 5.785, 5.655,
       5.525, 5.395, 5.265, 5.135, 5.005, 4.875, 4.745, 4.615, 4.485, 4.355,
       4.225, 4.095, 3.965, 3.835, 3.705, 3.575, 3.445, 3.315, 3.185, 3.055,
       2.925, 2.795, 2.665, 2.535, 2.405, 2.275, 2.145, 2.015, 1.885, 1.755,
       1.625, 1.495, 1.365, 1.235, 1.105, 0.975, 0.845, 0.715, 0.585, 0.455,
       0.325, 0.195, 0.065])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.065 0.195 0.325 ... 10.6 10.73</div><input id='attrs-b79c8d14-d909-4dac-a4ba-7d2f40a3163f' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b79c8d14-d909-4dac-a4ba-7d2f40a3163f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8ee1ecb9-ce68-419d-bc1e-190dfe335ec6' class='xr-var-data-in' type='checkbox'><label for='data-8ee1ecb9-ce68-419d-bc1e-190dfe335ec6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0.065,  0.195,  0.325,  0.455,  0.585,  0.715,  0.845,  0.975,  1.105,
        1.235,  1.365,  1.495,  1.625,  1.755,  1.885,  2.015,  2.145,  2.275,
        2.405,  2.535,  2.665,  2.795,  2.925,  3.055,  3.185,  3.315,  3.445,
        3.575,  3.705,  3.835,  3.965,  4.095,  4.225,  4.355,  4.485,  4.615,
        4.745,  4.875,  5.005,  5.135,  5.265,  5.395,  5.525,  5.655,  5.785,
        5.915,  6.045,  6.175,  6.305,  6.435,  6.565,  6.695,  6.825,  6.955,
        7.085,  7.215,  7.345,  7.475,  7.605,  7.735,  7.865,  7.995,  8.125,
        8.255,  8.385,  8.515,  8.645,  8.775,  8.905,  9.035,  9.165,  9.295,
        9.425,  9.555,  9.685,  9.815,  9.945, 10.075, 10.205, 10.335, 10.465,
       10.595, 10.725])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>xp</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-c5dd81f1-34b0-4cc6-932f-2d72bd6909f5' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c5dd81f1-34b0-4cc6-932f-2d72bd6909f5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ed198f36-04da-4b42-bbb5-084ad70dd5e8' class='xr-var-data-in' type='checkbox'><label for='data-ed198f36-04da-4b42-bbb5-084ad70dd5e8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>X</dd><dt><span>long_name :</span></dt><dd>column in camera perspective</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([[-128.81807 , -123.783775, -118.98053 , ...,   12.231447,   12.82951 ,
          13.417894],
       [ -60.351585,  -56.998096,  -53.795307, ...,   34.921967,   35.33183 ,
          35.735107],
       [   5.1985  ,    7.006818,    8.735526, ...,   57.272404,   57.499596,
          57.723167],
       ...,
       [1669.8353  , 1653.682   , 1637.8547  , ...,  954.08704 ,  949.2097  ,
         944.38684 ],
       [1682.5541  , 1666.4231  , 1650.6149  , ...,  964.80884 ,  959.8968  ,
         955.03937 ],
       [1695.0348  , 1678.9283  , 1663.141   , ...,  975.41974 ,  970.47406 ,
         965.58295 ]], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>yp</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-8f3e614f-40dc-4082-bc45-f83059a94fb8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8f3e614f-40dc-4082-bc45-f83059a94fb8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0ccff358-10ab-4080-a69f-95c071169dde' class='xr-var-data-in' type='checkbox'><label for='data-0ccff358-10ab-4080-a69f-95c071169dde' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>Y</dd><dt><span>long_name :</span></dt><dd>row in camera perspective</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([[-1010.6599 ,  -940.8396 ,  -874.2234 , ...,   945.55365,   953.8482 ,
          962.0085 ],
       [ -961.6935 ,  -894.48303,  -830.29297, ...,   947.773  ,   955.9875 ,
          964.06995],
       [ -914.81274,  -850.05676,  -788.1515 , ...,   949.9591 ,   958.095  ,
          966.101  ],
       ...,
       [  275.71844,   292.91467,   309.7638 , ...,  1037.6769 ,  1042.8691 ,
         1048.0033 ],
       [  284.81464,   301.75836,   318.36322, ...,  1038.7256 ,  1043.8851 ,
         1048.9873 ],
       [  293.74078,   310.43835,   326.80505, ...,  1039.7634 ,  1044.8907 ,
         1049.9613 ]], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>xs</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-b4c22d26-cd39-4f3f-991e-b44b1fb8c502' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b4c22d26-cd39-4f3f-991e-b44b1fb8c502' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d238972b-44ac-4a1d-a822-5f1ce91bc9ed' class='xr-var-data-in' type='checkbox'><label for='data-d238972b-44ac-4a1d-a822-5f1ce91bc9ed' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>X</dd><dt><span>long_name :</span></dt><dd>x-coordinate in Cartesian system</dd><dt><span>units :</span></dt><dd>m</dd></dl></div><div class='xr-var-data'><pre>array([[642730.33741 , 642730.348206, 642730.359002, ..., 642731.201083,
        642731.211879, 642731.222675],
       [642730.466961, 642730.477757, 642730.488553, ..., 642731.330634,
        642731.34143 , 642731.352226],
       [642730.596512, 642730.607308, 642730.618104, ..., 642731.460185,
        642731.470981, 642731.481777],
       ...,
       [642738.110467, 642738.121263, 642738.132059, ..., 642738.97414 ,
        642738.984936, 642738.995732],
       [642738.240018, 642738.250814, 642738.26161 , ..., 642739.103691,
        642739.114487, 642739.125282],
       [642738.369569, 642738.380365, 642738.39116 , ..., 642739.233242,
        642739.244038, 642739.254833]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ys</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-cd50aa8b-e2c3-47ab-a6e5-d105d019e590' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-cd50aa8b-e2c3-47ab-a6e5-d105d019e590' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5218f005-1a74-414b-8de2-ce2089cda216' class='xr-var-data-in' type='checkbox'><label for='data-5218f005-1a74-414b-8de2-ce2089cda216' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>Y</dd><dt><span>long_name :</span></dt><dd>y-coordinate in Cartesian system</dd><dt><span>units :</span></dt><dd>m</dd></dl></div><div class='xr-var-data'><pre>array([[8304292.751847, 8304292.881398, 8304293.010949, ..., 8304303.115923,
        8304303.245474, 8304303.375025],
       [8304292.741051, 8304292.870602, 8304293.000153, ..., 8304303.105127,
        8304303.234678, 8304303.364229],
       [8304292.730255, 8304292.859806, 8304292.989357, ..., 8304303.094331,
        8304303.223882, 8304303.353433],
       ...,
       [8304292.104092, 8304292.233643, 8304292.363194, ..., 8304302.468168,
        8304302.597719, 8304302.72727 ],
       [8304292.093296, 8304292.222847, 8304292.352398, ..., 8304302.457372,
        8304302.586923, 8304302.716474],
       [8304292.0825  , 8304292.212051, 8304292.341602, ..., 8304302.446576,
        8304302.576127, 8304302.705678]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-4283b13a-485d-46b2-b47d-ae8536a3d173' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4283b13a-485d-46b2-b47d-ae8536a3d173' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7a396dd8-6cdd-4818-a162-6a5072dab18f' class='xr-var-data-in' type='checkbox'><label for='data-7a396dd8-6cdd-4818-a162-6a5072dab18f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array([[28.329615, 28.329615, 28.329615, ..., 28.329622, 28.329623, 28.329623],
       [28.329616, 28.329616, 28.329616, ..., 28.329624, 28.329624, 28.329624],
       [28.329617, 28.329618, 28.329618, ..., 28.329625, 28.329625, 28.329625],
       ...,
       [28.329687, 28.329688, 28.329688, ..., 28.329695, 28.329695, 28.329695],
       [28.329689, 28.329689, 28.329689, ..., 28.329696, 28.329696, 28.329696],
       [28.32969 , 28.32969 , 28.32969 , ..., 28.329697, 28.329697, 28.329698]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-46f6602d-cdd6-4d70-ad85-372d1e5cbfb3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-46f6602d-cdd6-4d70-ad85-372d1e5cbfb3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-47621834-dc53-4a12-98be-1f770a1cd57e' class='xr-var-data-in' type='checkbox'><label for='data-47621834-dc53-4a12-98be-1f770a1cd57e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([[-15.334007, -15.334006, -15.334005, ..., -15.333914, -15.333913,
        -15.333911],
       [-15.334008, -15.334006, -15.334005, ..., -15.333914, -15.333913,
        -15.333911],
       [-15.334008, -15.334006, -15.334005, ..., -15.333914, -15.333913,
        -15.333912],
       ...,
       [-15.334013, -15.334012, -15.33401 , ..., -15.333919, -15.333918,
        -15.333917],
       [-15.334013, -15.334012, -15.334011, ..., -15.333919, -15.333918,
        -15.333917],
       [-15.334013, -15.334012, -15.334011, ..., -15.333919, -15.333918,
        -15.333917]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-073a48ad-020e-42ca-85a5-0cff205de1d5' class='xr-section-summary-in' type='checkbox'  checked><label for='section-073a48ad-020e-42ca-85a5-0cff205de1d5' class='xr-section-summary' >Data variables: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>v_x</span></div><div class='xr-var-dims'>(time, y, x)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-0e04049a-c124-4de1-9415-0c4db793dd96' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0e04049a-c124-4de1-9415-0c4db793dd96' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5eceb31b-b0f2-457e-9849-5b5022f4a91d' class='xr-var-data-in' type='checkbox'><label for='data-5eceb31b-b0f2-457e-9849-5b5022f4a91d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>sea_water_x_velocity</dd><dt><span>long_name :</span></dt><dd>Flow element center velocity vector, x-component</dd><dt><span>units :</span></dt><dd>m s-1</dd></dl></div><div class='xr-var-data'><pre>[648396 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>v_y</span></div><div class='xr-var-dims'>(time, y, x)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-39c27a42-f073-4bf1-9135-6f5b7b8d2692' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-39c27a42-f073-4bf1-9135-6f5b7b8d2692' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1001b3ac-bb6c-4f09-8f70-52322b20ecb6' class='xr-var-data-in' type='checkbox'><label for='data-1001b3ac-bb6c-4f09-8f70-52322b20ecb6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>sea_water_x_velocity</dd><dt><span>long_name :</span></dt><dd>Flow element center velocity vector, x-component</dd><dt><span>units :</span></dt><dd>m s-1</dd></dl></div><div class='xr-var-data'><pre>[648396 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>s2n</span></div><div class='xr-var-dims'>(time, y, x)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-e3ac42c8-1765-4a1b-b1be-3be65bc434e3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e3ac42c8-1765-4a1b-b1be-3be65bc434e3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-07d1abce-d207-4a71-85c5-6c0a8045204c' class='xr-var-data-in' type='checkbox'><label for='data-07d1abce-d207-4a71-85c5-6c0a8045204c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>ratio</dd><dt><span>long_name :</span></dt><dd>signal to noise ratio</dd><dt><span>units :</span></dt><dd></dd></dl></div><div class='xr-var-data'><pre>[648396 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>corr</span></div><div class='xr-var-dims'>(time, y, x)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-ee2866d0-0750-45c2-be12-74426d971b0c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ee2866d0-0750-45c2-be12-74426d971b0c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c727ad3d-a3f2-48ed-bb88-4bf8fea76fd6' class='xr-var-data-in' type='checkbox'><label for='data-c727ad3d-a3f2-48ed-bb88-4bf8fea76fd6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>correlation_coefficient</dd><dt><span>long_name :</span></dt><dd>correlation coefficient between frames</dd><dt><span>units :</span></dt><dd></dd></dl></div><div class='xr-var-data'><pre>[648396 values with dtype=float32]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-b38b9f43-3835-4fcb-9f78-9ebd5aa5b58a' class='xr-section-summary-in' type='checkbox'  checked><label for='section-b38b9f43-3835-4fcb-9f78-9ebd5aa5b58a' class='xr-section-summary' >Attributes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>camera_shape :</span></dt><dd>[1080, 1920]</dd><dt><span>camera_config :</span></dt><dd>{
    &quot;crs&quot;: &quot;PROJCRS[\&quot;WGS 84 / UTM zone 35S\&quot;,BASEGEOGCRS[\&quot;WGS 84\&quot;,ENSEMBLE[\&quot;World Geodetic System 1984 ensemble\&quot;,MEMBER[\&quot;World Geodetic System 1984 (Transit)\&quot;],MEMBER[\&quot;World Geodetic System 1984 (G730)\&quot;],MEMBER[\&quot;World Geodetic System 1984 (G873)\&quot;],MEMBER[\&quot;World Geodetic System 1984 (G1150)\&quot;],MEMBER[\&quot;World Geodetic System 1984 (G1674)\&quot;],MEMBER[\&quot;World Geodetic System 1984 (G1762)\&quot;],MEMBER[\&quot;World Geodetic System 1984 (G2139)\&quot;],ELLIPSOID[\&quot;WGS 84\&quot;,6378137,298.257223563,LENGTHUNIT[\&quot;metre\&quot;,1]],ENSEMBLEACCURACY[2.0]],PRIMEM[\&quot;Greenwich\&quot;,0,ANGLEUNIT[\&quot;degree\&quot;,0.0174532925199433]],ID[\&quot;EPSG\&quot;,4326]],CONVERSION[\&quot;UTM zone 35S\&quot;,METHOD[\&quot;Transverse Mercator\&quot;,ID[\&quot;EPSG\&quot;,9807]],PARAMETER[\&quot;Latitude of natural origin\&quot;,0,ANGLEUNIT[\&quot;degree\&quot;,0.0174532925199433],ID[\&quot;EPSG\&quot;,8801]],PARAMETER[\&quot;Longitude of natural origin\&quot;,27,ANGLEUNIT[\&quot;degree\&quot;,0.0174532925199433],ID[\&quot;EPSG\&quot;,8802]],PARAMETER[\&quot;Scale factor at natural origin\&quot;,0.9996,SCALEUNIT[\&quot;unity\&quot;,1],ID[\&quot;EPSG\&quot;,8805]],PARAMETER[\&quot;False easting\&quot;,500000,LENGTHUNIT[\&quot;metre\&quot;,1],ID[\&quot;EPSG\&quot;,8806]],PARAMETER[\&quot;False northing\&quot;,10000000,LENGTHUNIT[\&quot;metre\&quot;,1],ID[\&quot;EPSG\&quot;,8807]]],CS[Cartesian,2],AXIS[\&quot;(E)\&quot;,east,ORDER[1],LENGTHUNIT[\&quot;metre\&quot;,1]],AXIS[\&quot;(N)\&quot;,north,ORDER[2],LENGTHUNIT[\&quot;metre\&quot;,1]],USAGE[SCOPE[\&quot;Engineering survey, topographic mapping.\&quot;],AREA[\&quot;Between 24\u00b0E and 30\u00b0E, southern hemisphere between 80\u00b0S and equator, onshore and offshore. Botswana. Burundi. Democratic Republic of the Congo (Zaire). Rwanda. South Africa. Tanzania. Uganda. Zambia. Zimbabwe.\&quot;],BBOX[-80,24,0,30]],ID[\&quot;EPSG\&quot;,32735]]&quot;,
    &quot;resolution&quot;: 0.01,
    &quot;lens_position&quot;: [
        642732.6705,
        8304289.01,
        1188.5
    ],
    &quot;gcps&quot;: {
        &quot;src&quot;: [
            [
                1421,
                1001
            ],
            [
                1251,
                460
            ],
            [
                421,
                432
            ],
            [
                470,
                607
            ]
        ],
        &quot;dst&quot;: [
            [
                642735.8076,
                8304292.119
            ],
            [
                642737.5823,
                8304295.593
            ],
            [
                642732.7864,
                8304298.425
            ],
            [
                642732.6705,
                8304296.858
            ]
        ],
        &quot;h_ref&quot;: null,
        &quot;z_0&quot;: 1182.2
    },
    &quot;window_size&quot;: 25,
    &quot;corners&quot;: [
        [
            292,
            817
        ],
        [
            50,
            166
        ],
        [
            1200,
            236
        ],
        [
            1600,
            834
        ]
    ]
}</dd><dt><span>h_a :</span></dt><dd>null</dd></dl></div></li></ul></div></div></div>
</div>
<p>As you can see, we have lots of coordinate variables at our disposal, these can be used in turn to plot our data in a local projection, with our bounding box top-left corner at the top-left. The <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> axes hold the local coordinates. We can also use the UTM35S coordinates, stored in <code class="docutils literal notranslate"><span class="pre">xs</span></code> and <code class="docutils literal notranslate"><span class="pre">ys</span></code>, the longitude and latitude coordinates stored in <code class="docutils literal notranslate"><span class="pre">lon</span></code> and <code class="docutils literal notranslate"><span class="pre">lat</span></code>, or….(very cool) the original row and column coordinate of the camera’s objective. This allows us to plot the results
as an augmented reality view.</p>
<p>In the data variables, we see <code class="docutils literal notranslate"><span class="pre">v_x</span></code> and <code class="docutils literal notranslate"><span class="pre">v_y</span></code> for the x-directional and y-directional velocity, measured long the <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> axis of the local coordinate system. Furthermore we see the <code class="docutils literal notranslate"><span class="pre">s2n</span></code> variable containing the signal to noise ratio computed by the underlying used library OpenPIV. This ratio is computed as the ratio between the highest correlation and the second highest correlation found in the surroundings of each window. We also store the highest correlation found in the
variable <code class="docutils literal notranslate"><span class="pre">corr</span></code>. As this is done for each frame to frame pair, the dataset contain 124 time steps, since we extract 125 frames.</p>
<p>Because we used a 0.01 resolution and a 25 pixel interrogation window, and <code class="docutils literal notranslate"><span class="pre">pyorc</span></code> typically uses an overlap between windows of 50%, the <code class="docutils literal notranslate"><span class="pre">y</span></code> and <code class="docutils literal notranslate"><span class="pre">x</span></code> coordinates have a spacing of <code class="docutils literal notranslate"><span class="pre">25</span> <span class="pre">*</span> <span class="pre">0.01</span> <span class="pre">*</span> <span class="pre">0.5</span> <span class="pre">=</span> <span class="pre">0.125</span> <span class="pre">cm</span></code> (rounded to 0.13).</p>
<p>Finally, a lot of attributes are stored in a serializable form, so that the dataset can be stored in NetCDF, and the camera configuration and other information needed can be used after loading.</p>
<section id="Plotting-in-local-projection">
<h2>Plotting in local projection<a class="headerlink" href="#Plotting-in-local-projection" title="Permalink to this heading">#</a></h2>
<p>Both a frames <code class="docutils literal notranslate"><span class="pre">DataArray</span></code> and a velocimetry <code class="docutils literal notranslate"><span class="pre">Dataset</span></code> have plotting functionalities that can be used to combine information into a plot. The default is to plot data in the local projection that follows the area of interest bounding box, but geographical plots or camera perspectives can also be plotted. Let’s start with an rgb frame with the PIV results on top. We cannot plot the time dimension, so we apply a <code class="docutils literal notranslate"><span class="pre">mean</span></code> reducer first.</p>
<p>Note that whilst plotting velocimetry results, we can supply <code class="docutils literal notranslate"><span class="pre">kwargs_scalar</span></code> and <code class="docutils literal notranslate"><span class="pre">kwargs_quiver</span></code>. These are meant to pass arguments to plotting of the scalar velocity values (plotted as a mesh) and the vectors (plotted as arrows).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># first re-open the original video, extract one RGB frame and plot that</span>
<span class="n">video_file</span> <span class="o">=</span> <span class="s2">&quot;ngwerere/ngwerere_20191103.mp4&quot;</span>

<span class="n">video</span> <span class="o">=</span> <span class="n">pyorc</span><span class="o">.</span><span class="n">Video</span><span class="p">(</span><span class="n">video_file</span><span class="p">,</span> <span class="n">start_frame</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end_frame</span><span class="o">=</span><span class="mi">125</span><span class="p">)</span>
<span class="c1"># borrow the camera config from the velocimetry results</span>
<span class="n">video</span><span class="o">.</span><span class="n">camera_config</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">velocimetry</span><span class="o">.</span><span class="n">camera_config</span>

<span class="n">da_rgb</span> <span class="o">=</span> <span class="n">video</span><span class="o">.</span><span class="n">get_frames</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;rgb&quot;</span><span class="p">)</span>
<span class="c1"># project the rgb frame</span>
<span class="n">da_rgb_proj</span> <span class="o">=</span> <span class="n">da_rgb</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">project</span><span class="p">()</span>
<span class="c1"># plot the first frame (we only have one) without any arguments, default is to use &quot;local&quot; mode</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">da_rgb_proj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="c1"># now plot the results on top, we use the mean, because we cannot plot more than 2 dimensions.</span>
<span class="c1"># Default plotting method is &quot;quiver&quot;, but &quot;scatter&quot; or &quot;pcolormesh&quot; is also possible.</span>
<span class="c1"># We add a nice colorbar to understand the magnitudes.</span>
<span class="c1"># We give the existing axis handle of the mappable returned from .frames.plot to plot on, and use</span>
<span class="c1"># some transparency.</span>
<span class="n">ds_mean</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="n">keep_attrs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># first a pcolormesh</span>
<span class="n">ds_mean</span><span class="o">.</span><span class="n">velocimetry</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">axes</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;rainbow&quot;</span><span class="p">,</span>
    <span class="n">add_colorbar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">vmax</span><span class="o">=</span><span class="mf">0.6</span>
<span class="p">)</span>

<span class="n">ds_mean</span><span class="o">.</span><span class="n">velocimetry</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">axes</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mf">0.0015</span><span class="p">,</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.quiver.Quiver at 0x7f8329fca290&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/_examples_03_Plotting_and_filtering_velocimetry_results_6_1.png" src="../_images/_examples_03_Plotting_and_filtering_velocimetry_results_6_1.png" />
</div>
</div>
</section>
<section id="Filtering-of-results">
<h2>Filtering of results<a class="headerlink" href="#Filtering-of-results" title="Permalink to this heading">#</a></h2>
<p>Already this looks very promising. But we haven’t yet analyzed any of the velocities for spurious values. Even over land we have estimates of velocities, while we would not expect that. We have a set of temporal filters which analyze for spurious values by comparing over time steps, and spatial filters, which compare neighbouring grid cell values to flag spurious values. Let’s apply all temporal filters top see what we have.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># simply apply all filters in time domain, this is done by calling .filter_temporal without arguments.</span>
<span class="n">ds_filt</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">velocimetry</span><span class="o">.</span><span class="n">filter_temporal</span><span class="p">()</span>

<span class="c1"># apply the plot again, let&#39;s leave out the scalar values, and make the quivers a bit nicer than before.</span>
<span class="n">ds_mean_filt</span> <span class="o">=</span> <span class="n">ds_filt</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="n">keep_attrs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="c1"># again the rgb frame first</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">da_rgb_proj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="c1">#...and then filtered velocimetry</span>
<span class="n">ds_mean_filt</span><span class="o">.</span><span class="n">velocimetry</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">axes</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;rainbow&quot;</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mf">0.0015</span><span class="p">,</span>
    <span class="n">norm</span><span class="o">=</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmax</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="n">add_colorbar</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.quiver.Quiver at 0x7f836cdb9090&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/_examples_03_Plotting_and_filtering_velocimetry_results_8_1.png" src="../_images/_examples_03_Plotting_and_filtering_velocimetry_results_8_1.png" />
</div>
</div>
<p>Interesting! We see that the velocities become a lot higher on average. Most likely because many spurious velocities are removed. We also see that the velocities seem to be more left-to-right oriented. In part this may be because we applied the <code class="docutils literal notranslate"><span class="pre">.filter_temporal_angle</span></code> method under the hood. This filter removes velocities that are in a direction, far off from the expected direction. The default direction of this filter is always left to right. Therefore take good care of this filter, if you
decide to apply <code class="docutils literal notranslate"><span class="pre">pyorc</span></code> in a bottom to top direction.</p>
<p>As this stream is very shallow and has lots of obstructions like rocks that the water goes around, the application of this filter may have removed many velocities that were actually correct. Let’s do the filtering again, but whilst leaving out the angular filter.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># apply all filters in time domain except for the angle filter, this is done by calling .filter_temporal without arguments.</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">ds_filt2</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">velocimetry</span><span class="o">.</span><span class="n">filter_temporal</span><span class="p">(</span><span class="n">kwargs_angle</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">angle_tolerance</span><span class="o">=</span><span class="mf">0.5</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span>
<span class="n">ds_filt2</span><span class="o">.</span><span class="n">velocimetry</span><span class="o">.</span><span class="n">filter_spatial</span><span class="p">(</span><span class="n">filter_nan</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">kwargs_median</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">wdw</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="c1"># apply the plot again, let&#39;s leave out the scalr values, and make the quivers a bit nicer than before.</span>

<span class="n">ds_mean_filt2</span> <span class="o">=</span> <span class="n">ds_filt2</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="n">keep_attrs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># again the rgb frame first</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">da_rgb_proj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="c1">#...and then filtered velocimetry</span>
<span class="n">ds_mean_filt2</span><span class="o">.</span><span class="n">velocimetry</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">axes</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;rainbow&quot;</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mf">0.0015</span><span class="p">,</span>
    <span class="n">norm</span><span class="o">=</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmax</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="n">add_colorbar</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.quiver.Quiver at 0x7f836c3b5240&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/_examples_03_Plotting_and_filtering_velocimetry_results_10_1.png" src="../_images/_examples_03_Plotting_and_filtering_velocimetry_results_10_1.png" />
</div>
</div>
<p>It looks more natural. Check for instance the pattern around the rock on the left side. Now we can also plot in a geographical view.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># again the rgb frame first. But now we use the &quot;geographical&quot; mode to plot on a map</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">da_rgb_proj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;geographical&quot;</span><span class="p">)</span>

<span class="c1">#...and then filtered velocimetry again, but also geographical</span>
<span class="n">ds_mean_filt2</span><span class="o">.</span><span class="n">velocimetry</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">axes</span><span class="p">,</span>
    <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;geographical&quot;</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;rainbow&quot;</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mf">0.0015</span><span class="p">,</span>
    <span class="n">norm</span><span class="o">=</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmax</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="n">add_colorbar</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># for fun, let&#39;s also add a satellite background from cartopy</span>
<span class="kn">import</span> <span class="nn">cartopy.io.img_tiles</span> <span class="k">as</span> <span class="nn">cimgt</span>
<span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>
<span class="n">tiles</span> <span class="o">=</span> <span class="n">cimgt</span><span class="o">.</span><span class="n">GoogleTiles</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;satellite&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">add_image</span><span class="p">(</span><span class="n">tiles</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span>
<span class="c1"># zoom out a little bit so that we can actually see a bit</span>
<span class="n">p</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span>
    <span class="n">da_rgb_proj</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">-</span> <span class="mf">0.00005</span><span class="p">,</span>
    <span class="n">da_rgb_proj</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">+</span> <span class="mf">0.00005</span><span class="p">,</span>
    <span class="n">da_rgb_proj</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">-</span> <span class="mf">0.00005</span><span class="p">,</span>
    <span class="n">da_rgb_proj</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">+</span> <span class="mf">0.00005</span><span class="p">],</span>
    <span class="n">crs</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">()</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/_examples_03_Plotting_and_filtering_velocimetry_results_12_0.png" src="../_images/_examples_03_Plotting_and_filtering_velocimetry_results_12_0.png" />
</div>
</div>
</section>
<section id="Immersive-and-intuitive-augmented-reality">
<h2>Immersive and intuitive augmented reality<a class="headerlink" href="#Immersive-and-intuitive-augmented-reality" title="Permalink to this heading">#</a></h2>
<p>And now the most beautiful plot you can make with pyorc: an augmented reality view. For this, we need an unprojected rgb frame and supply the <code class="docutils literal notranslate"><span class="pre">mode=&quot;camera&quot;</span></code> keyword argument.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># again the rgb frame first, but now the unprojected one. Now we use the &quot;camera&quot; mode to plot the camera perspective</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">da_rgb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;camera&quot;</span><span class="p">)</span>

<span class="c1">#...and then filtered velocimetry again, but also camera. This gives us an augmented reality view. The quiver scale</span>
<span class="c1"># needs to be adapted to fit in the screen properly</span>
<span class="n">ds_mean_filt2</span><span class="o">.</span><span class="n">velocimetry</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">axes</span><span class="p">,</span>
    <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;camera&quot;</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;rainbow&quot;</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mf">0.0015</span><span class="p">,</span>
    <span class="n">norm</span><span class="o">=</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="n">add_colorbar</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.quiver.Quiver at 0x7f836c0ff550&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/_examples_03_Plotting_and_filtering_velocimetry_results_14_1.png" src="../_images/_examples_03_Plotting_and_filtering_velocimetry_results_14_1.png" />
</div>
</div>
</section>
<section id="Store-the-final-filtered-results">
<h2>Store the final filtered results<a class="headerlink" href="#Store-the-final-filtered-results" title="Permalink to this heading">#</a></h2>
<p>Let’s also store the filtered velocities in a separate file. To ensure it remains really small, we can use the <code class="docutils literal notranslate"><span class="pre">.set_encoding</span></code> method first, to ensure the variables are encoded to integer values before storing. This makes the file nice and small.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_filt2</span><span class="o">.</span><span class="n">velocimetry</span><span class="o">.</span><span class="n">set_encoding</span><span class="p">()</span>
<span class="n">ds_filt2</span><span class="o">.</span><span class="n">to_netcdf</span><span class="p">(</span><span class="s2">&quot;ngwerere_filtered.nc&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
</section>


              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="02_Process_velocimetry.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Analyze surface velocities of a video with velocimetry</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="04_Extracting_crosssection_velocities_and_discharge.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Obtain a discharge measurement over a cross section</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2022, Rainbow Sensing.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.0.1.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>